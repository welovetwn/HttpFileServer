@* /Views/Dashboard/Index.cshtml *@
@model HttpFileServer.Models.DashboardViewModel

@{
    ViewData["Title"] = "Dashboard";
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - HttpFileServer</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
</head>
<body>
    <div class="container mt-5">

        <h2 class="mb-3">您好, @Model.Username!</h2>
        @* <p>權限為: <strong>@Model.Role</strong></p> *@

        @* <h3 class="mt-4">📂 資料夾</h3> *@
        <div class="d-flex justify-content-between align-items-center mt-4 mb-3">
            <h2>📁 資料夾</h2>
            <a href="/" class="btn btn-info btn-sm mt-2 mb-1">← 首頁</a>
        </div>

        @if (Model.AccessibleFolders.Any())
        {
            <table class="table table-bordered table-striped mt-3">
                <thead class="table-dark">
                    <tr>
                        <th>資料夾名稱</th>
                        <th>實體路徑</th>
                        <th>權限</th>
                        <th style="width: 120px;">操作</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var folder in Model.AccessibleFolders)
                    {
                        <tr>
                            <td>@folder.Name</td>
                            <td>@folder.Path</td>
                            <td>
                                @switch (folder.Permission)
                                {
                                    case PermissionLevel.Admin:
                                        <span class="badge bg-danger text-white">管理權限</span>
                                        break;
                                    case PermissionLevel.FullAccess:
                                        <span class="badge bg-success">完全存取</span>
                                        break;
                                    case PermissionLevel.ReadOnly:
                                        <span class="badge bg-warning text-dark">唯讀</span>
                                        break;
                                    case PermissionLevel.DownloadOnly:
                                        <span class="badge bg-info text-dark">可下載</span>
                                        break;
                                    case PermissionLevel.None:
                                        <span class="badge bg-secondary">無權限</span>
                                        break;
                                }
                            </td>
                            <td>
                                <a class="btn btn-sm btn-success" href="/files/@folder.Name">瀏覽</a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        else
        {
            <div class="alert alert-danger mt-3">
                你尚未被授權存取任何資料夾。
            </div>
        }
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
